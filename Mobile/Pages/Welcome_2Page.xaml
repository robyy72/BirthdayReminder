<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:resx="clr-namespace:MobileLanguages;assembly=MobileLanguages"
             x:Class="Mobile.Welcome_2Page"
             Title="{x:Static resx:Resources.Page_Welcome_Title}"
             Shell.NavBarIsVisible="False">

    <ScrollView>
        <VerticalStackLayout Padding="30" Spacing="20">

            <Label Text="{x:Static resx:Resources.Welcome_DataSources}"
                   FontSize="26"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   Margin="0,20,0,20" />

            <!-- Contacts Section -->
            <Frame BackgroundColor="{StaticResource Gray100}"
                   CornerRadius="15"
                   Padding="20"
                   HasShadow="False">
                <VerticalStackLayout Spacing="15">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="&#x1F4D6;"
                               FontSize="24"
                               VerticalOptions="Center" />
                        <Label Text="{x:Static resx:Resources.Settings_Contacts}"
                               FontSize="20"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <!-- Read from contacts with birthday -->
                    <Grid ColumnDefinitions="*,Auto" Padding="5,0">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="{x:Static resx:Resources.Settings_ReadContactsBirthday}"
                                   FontSize="16" />
                            <Label Text="{x:Static resx:Resources.Settings_ReadContactsBirthday_Desc}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </VerticalStackLayout>
                        <Switch x:Name="ReadContactsBirthdaySwitch"
                                Grid.Column="1"
                                Toggled="OnContactsReadToggled"
                                VerticalOptions="Center" />
                    </Grid>

                    <!-- Read from all contacts -->
                    <Grid ColumnDefinitions="*,Auto" Padding="5,0">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="{x:Static resx:Resources.Settings_ReadContactsAll}"
                                   FontSize="16" />
                            <Label Text="{x:Static resx:Resources.Settings_ReadContactsAll_Desc}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </VerticalStackLayout>
                        <Switch x:Name="ReadContactsAllSwitch"
                                Grid.Column="1"
                                Toggled="OnContactsReadToggled"
                                VerticalOptions="Center" />
                    </Grid>

                    <!-- Write to contacts -->
                    <Grid ColumnDefinitions="*,Auto" Padding="5,0">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="{x:Static resx:Resources.Settings_WriteContacts}"
                                   FontSize="16" />
                            <Label Text="{x:Static resx:Resources.Settings_WriteContacts_Desc}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </VerticalStackLayout>
                        <Switch x:Name="WriteContactsSwitch"
                                Grid.Column="1"
                                Toggled="OnContactsWriteToggled"
                                VerticalOptions="Center" />
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Calendar Section -->
            <Frame BackgroundColor="{StaticResource Gray100}"
                   CornerRadius="15"
                   Padding="20"
                   HasShadow="False">
                <VerticalStackLayout Spacing="15">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="&#x1F4C5;"
                               FontSize="24"
                               VerticalOptions="Center" />
                        <Label Text="{x:Static resx:Resources.Settings_Calendars}"
                               FontSize="20"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>

                    <!-- Read from calendars -->
                    <Grid ColumnDefinitions="*,Auto" Padding="5,0">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="{x:Static resx:Resources.Settings_ReadCalendars}"
                                   FontSize="16" />
                            <Label Text="{x:Static resx:Resources.Settings_ReadCalendars_Desc}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </VerticalStackLayout>
                        <Switch x:Name="ReadCalendarsSwitch"
                                Grid.Column="1"
                                Toggled="OnCalendarReadToggled"
                                VerticalOptions="Center" />
                    </Grid>

                    <!-- Write to calendars -->
                    <Grid ColumnDefinitions="*,Auto" Padding="5,0">
                        <VerticalStackLayout Grid.Column="0">
                            <Label Text="{x:Static resx:Resources.Settings_WriteCalendars}"
                                   FontSize="16" />
                            <Label Text="{x:Static resx:Resources.Settings_WriteCalendars_Desc}"
                                   FontSize="12"
                                   TextColor="{StaticResource Gray500}" />
                        </VerticalStackLayout>
                        <Switch x:Name="WriteCalendarsSwitch"
                                Grid.Column="1"
                                Toggled="OnCalendarWriteToggled"
                                VerticalOptions="Center" />
                    </Grid>

                    <!-- Calendar List -->
                    <VerticalStackLayout x:Name="CalendarListContainer"
                                         IsVisible="False"
                                         Spacing="10"
                                         Margin="0,10,0,0">
                        <Label Text="{x:Static resx:Resources.Settings_SelectCalendars}"
                               FontSize="14"
                               FontAttributes="Bold"
                               TextColor="{StaticResource Primary}" />
                        <CollectionView x:Name="CalendarListView"
                                        SelectionMode="Multiple"
                                        SelectionChanged="OnCalendarSelectionChanged">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Frame BackgroundColor="White"
                                           CornerRadius="8"
                                           Padding="12"
                                           Margin="0,2"
                                           HasShadow="False">
                                        <HorizontalStackLayout Spacing="10">
                                            <BoxView WidthRequest="12"
                                                     HeightRequest="12"
                                                     CornerRadius="6"
                                                     Color="{Binding Color}"
                                                     VerticalOptions="Center" />
                                            <Label Text="{Binding Name}"
                                                   FontSize="14"
                                                   VerticalOptions="Center" />
                                        </HorizontalStackLayout>
                                    </Frame>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Buttons -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="15" Margin="0,20,0,0">
                <Button Text="{x:Static resx:Resources.General_Button_Back}"
                        Grid.Column="0"
                        FontSize="18"
                        HeightRequest="55"
                        CornerRadius="27"
                        BackgroundColor="{StaticResource Gray400}"
                        Clicked="OnBackClicked" />
                <Button Text="{x:Static resx:Resources.General_Button_Finish}"
                        Grid.Column="1"
                        FontSize="18"
                        HeightRequest="55"
                        CornerRadius="27"
                        Clicked="OnFinishClicked" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
