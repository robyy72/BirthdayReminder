<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:resx="clr-namespace:MobileLanguages;assembly=MobileLanguages"
             xmlns:controls="clr-namespace:Mobile"
             x:Class="Mobile.ReminderPage"
             x:DataType="controls:ReminderPage"
             Title="{x:Static resx:Resources.Page_Welcome_Title}"
             Shell.NavBarIsVisible="False"
             NavigationPage.HasNavigationBar="False">

    <Grid RowDefinitions="Auto,Auto,*">
        <!-- Custom Header -->
        <controls:CustomHeader Grid.Row="0"
                               Title="{x:Static resx:Resources.Page_Main_Title}"
                               ShowMenuButton="False"
                               ShowBackButton="True"
                               ShowContextMenu="True"
                               BackClickedCommand="{Binding BackCommand}" />

        <!-- Fixed Header Section -->
        <VerticalStackLayout Grid.Row="1" Padding="30,20,30,10" Spacing="15">
            <!-- Header: Reminder Number -->
            <Label x:Name="ReminderHeaderLabel"
                   Style="{StaticResource LabelHeader}"
                   HorizontalOptions="Start"
                   HorizontalTextAlignment="Start" />

            <!-- Days Before Picker -->
            <Grid ColumnDefinitions="*,Auto" ColumnSpacing="10">
                <Label Grid.Column="0"
                       Text="{x:Static resx:Resources.Settings_DaysBefore}"
                       Style="{StaticResource LabelInfo}"
                       VerticalOptions="Center" />
                <Picker x:Name="DaysPicker"
                        Grid.Column="1"
                        WidthRequest="80"
                        FontSize="18"
                        HorizontalTextAlignment="Center" />
            </Grid>
        </VerticalStackLayout>

        <ScrollView Grid.Row="2">
            <VerticalStackLayout Padding="30,10,30,30" Spacing="20">

                <!-- Card: Push Notification -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="0">
                        <Border Style="{StaticResource CardHeader}">
                            <Label Text="{x:Static resx:Resources.ReminderMethod_Notification}"
                                   Style="{StaticResource LabelCardHeader}" />
                        </Border>
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label x:Name="NotificationStatusLabel"
                                   Text="{x:Static resx:Resources.Reminder_Status_Free}"
                                   Style="{StaticResource LabelInfo}" />
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0"
                                       Text="{x:Static resx:Resources.General_Label_Active}"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <Switch x:Name="NotificationSwitch" Grid.Column="1" />
                            </Grid>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label x:Name="NotificationTimeLabel"
                                       Grid.Column="0"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <TimePicker x:Name="NotificationTimePicker"
                                            Grid.Column="1"
                                            Style="{StaticResource TimePickerText}" />
                            </Grid>
                            <Label Text="{x:Static resx:Resources.More_Informations}"
                                   Style="{StaticResource LabelHelpLink}"
                                   HorizontalOptions="End">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnNotificationInfoTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Card: Phone Alarm -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="0">
                        <Border Style="{StaticResource CardHeader}">
                            <Label Text="{x:Static resx:Resources.ReminderMethod_Alarm}"
                                   Style="{StaticResource LabelCardHeader}" />
                        </Border>
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label x:Name="AlarmStatusLabel"
                                   Text="{x:Static resx:Resources.Reminder_Status_Free}"
                                   Style="{StaticResource LabelInfo}" />
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0"
                                       Text="{x:Static resx:Resources.General_Label_Active}"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <Switch x:Name="AlarmSwitch" Grid.Column="1" />
                            </Grid>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label x:Name="AlarmTimeLabel"
                                       Grid.Column="0"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <TimePicker x:Name="AlarmTimePicker"
                                            Grid.Column="1"
                                            Style="{StaticResource TimePickerText}" />
                            </Grid>
                            <Label Text="{x:Static resx:Resources.More_Informations}"
                                   Style="{StaticResource LabelHelpLink}"
                                   HorizontalOptions="End">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnAlarmInfoTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Card: Email -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="0">
                        <Border Style="{StaticResource CardHeader}">
                            <Label Text="{x:Static resx:Resources.ReminderMethod_Email}"
                                   Style="{StaticResource LabelCardHeader}" />
                        </Border>
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label x:Name="EmailStatusLabel"
                                   Text="{x:Static resx:Resources.Reminder_Status_FreeLimited}"
                                   Style="{StaticResource LabelInfo}" />
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0"
                                       Text="{x:Static resx:Resources.General_Label_Active}"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <Switch x:Name="EmailSwitch" Grid.Column="1" />
                            </Grid>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label x:Name="EmailTimeLabel"
                                       Grid.Column="0"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <TimePicker x:Name="EmailTimePicker"
                                            Grid.Column="1"
                                            Style="{StaticResource TimePickerText}" />
                            </Grid>
                            <Label Text="{x:Static resx:Resources.More_Informations}"
                                   Style="{StaticResource LabelHelpLink}"
                                   HorizontalOptions="End">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnEmailInfoTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Card: Signal -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="0">
                        <Border Style="{StaticResource CardHeader}">
                            <Label Text="{x:Static resx:Resources.ReminderMethod_Signal}"
                                   Style="{StaticResource LabelCardHeader}" />
                        </Border>
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label x:Name="SignalStatusLabel"
                                   Text="{x:Static resx:Resources.Reminder_Status_FreeCurrently}"
                                   Style="{StaticResource LabelInfo}" />
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0"
                                       Text="{x:Static resx:Resources.General_Label_Active}"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <Switch x:Name="SignalSwitch" Grid.Column="1" />
                            </Grid>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label x:Name="SignalTimeLabel"
                                       Grid.Column="0"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <TimePicker x:Name="SignalTimePicker"
                                            Grid.Column="1"
                                            Style="{StaticResource TimePickerText}" />
                            </Grid>
                            <Label Text="{x:Static resx:Resources.More_Informations}"
                                   Style="{StaticResource LabelHelpLink}"
                                   HorizontalOptions="End">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnSignalInfoTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Card: SMS (Paid) -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="0">
                        <Border Style="{StaticResource CardHeader}">
                            <Label Text="{x:Static resx:Resources.ReminderMethod_Sms}"
                                   Style="{StaticResource LabelCardHeader}" />
                        </Border>
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label x:Name="SmsStatusLabel"
                                   Text="{x:Static resx:Resources.Reminder_Status_Subscription}"
                                   Style="{StaticResource LabelHelpLink}">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnSubscriptionTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0"
                                       Text="{x:Static resx:Resources.General_Label_Active}"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <Switch x:Name="SmsSwitch" Grid.Column="1" />
                            </Grid>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label x:Name="SmsTimeLabel"
                                       Grid.Column="0"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <TimePicker x:Name="SmsTimePicker"
                                            Grid.Column="1"
                                            Style="{StaticResource TimePickerText}" />
                            </Grid>
                            <Label Text="{x:Static resx:Resources.More_Informations}"
                                   Style="{StaticResource LabelHelpLink}"
                                   HorizontalOptions="End">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnSmsInfoTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Card: WhatsApp (Paid) -->
                <Border Style="{StaticResource Card}">
                    <VerticalStackLayout Spacing="0">
                        <Border Style="{StaticResource CardHeader}">
                            <Label Text="{x:Static resx:Resources.ReminderMethod_WhatsApp}"
                                   Style="{StaticResource LabelCardHeader}" />
                        </Border>
                        <VerticalStackLayout Padding="20" Spacing="15">
                            <Label x:Name="WhatsAppStatusLabel"
                                   Text="{x:Static resx:Resources.Reminder_Status_Subscription}"
                                   Style="{StaticResource LabelHelpLink}">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnSubscriptionTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label Grid.Column="0"
                                       Text="{x:Static resx:Resources.General_Label_Active}"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <Switch x:Name="WhatsAppSwitch" Grid.Column="1" />
                            </Grid>
                            <Grid ColumnDefinitions="*,Auto">
                                <Label x:Name="WhatsAppTimeLabel"
                                       Grid.Column="0"
                                       Style="{StaticResource LabelInfo}"
                                       VerticalOptions="Center" />
                                <TimePicker x:Name="WhatsAppTimePicker"
                                            Grid.Column="1"
                                            Style="{StaticResource TimePickerText}" />
                            </Grid>
                            <Label Text="{x:Static resx:Resources.More_Informations}"
                                   Style="{StaticResource LabelHelpLink}"
                                   HorizontalOptions="End">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="OnWhatsAppInfoTapped" />
                                </Label.GestureRecognizers>
                            </Label>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </Border>

                <!-- Bottom Buttons -->
                <Grid ColumnDefinitions="*,*" ColumnSpacing="15">
                    <Button Grid.Column="0"
                            Text="{x:Static resx:Resources.General_Button_Back}"
                            Style="{StaticResource ButtonSecondary}"
                            Clicked="OnBackClicked" />
                    <Button x:Name="NextButton"
                            Grid.Column="1"
                            Text="{x:Static resx:Resources.General_Button_Next}"
                            Style="{StaticResource ButtonPrimary}"
                            Clicked="OnNextClicked" />
                </Grid>

            </VerticalStackLayout>
        </ScrollView>

        <!-- Context Menu Overlay (spans all rows) -->
        <controls:ContextMenu x:Name="TheContextMenu"
                              Grid.Row="0"
                              Grid.RowSpan="3" />
    </Grid>

</ContentPage>
